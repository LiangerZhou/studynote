> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 https://mp.weixin.qq.com/s?__biz=MzIxMjE5MTE1Nw==&mid=2653190965&idx=1&sn=53f78fa037386f85531832cd5322d2a0&chksm=8c9909efbbee80f90512f0c36356c31cc74c388c46388dc2317d43c8f8597298f233ca9c29e9&scene=21#wechat_redirect

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omperuU9tXVmGtiaebVYhIH8LzNQ4SQ9gcmt8lFRmbVsote0EWZnYWkFQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omvE3DX4LSX7UibSEHDpZOf4OXTIkmqCKs1ib0kbiaiauTePPDaxIqwLyLeg/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omELrLF4iagicxUdv5w5btvMcQQ1ohptiaaSwAia1Fkuch7G3fkknia7fNePg/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omSKmWO5RhbfETA3zpFeHZ4cibNoIicvH53qDjqG8ACNCicNcWEfzw4XWAg/0?wx_fmt=jpeg)

————————————

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4om3Qb9JbdqRkZrupQiao3q5icrLj50oKiclmhqoQ7KYhrMw9U0RkccRn8LA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omZgqJwlvKKIEiboZYN1bj1ptC8JDBpSgMK5sGsXVbfvqLhmAsYnCwa1A/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4om164ApDQhpkSADVz47icNO3o935TepKIUW9xrsR2G3D5I1mXGBTEuHXg/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omcoibibpZkKHvjlCKsltt6ibWFekKiaVmJhVolWSicZxNu7PdWF0gyoia1xuQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omicanwicic4BYm8mbD3Q8pke9DVg0PtxeURueV3GgANAejY08UFSsThehQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4om0W1TkatXcgYSTJ7oJ2LqfJmw3qQug4b9P3mUyTc0K0fzKj1EIBJynQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omBUWHsicmVibFZUZZReEcs6Zc3ib6QXLYK4ia47FTFicTMX0OUhdAph2v64Q/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omTAN4YuIgbLictZMXokmleDkhnzicgXia0AXOU20icbQ3pbJkticiaSoGPT8A/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omjicVxJO4kgHOBz8b22xEXHHzGr1pYlAibauqDbm2VA0MI1oITlpzZ5Yw/0?wx_fmt=jpeg)

————————————

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omdmtOGTVtHfdQf3LclwKpo1CKYmUfMR4l2QUksDsl1oX13yMBe9FD0Q/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omaDShib6S2yT1WpbviaA9LIUfkoiaGNh0l4CXvUm1ZJCrAhibqaZm06RgOQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4om6Hic9ucmUQKD1sOvC8y3JicHFGXEaOBl2MqpFsggOShs3g7BQzzPXicXA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4ommNia994ceJWX4EWfoMh1WX62ZaicIichj5saiaVpexWyKrLicubIjHckKrA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoX9aS1vS0cNOWWdNpKV4omSOUSOqWqT1nIZABVxuOOj73vcJwzWXnTdLpNTuGgib4MJnQoLTxaMdg/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsUCP8BndApsVGic5GsRF5jzWDMMDpR6hbuV02Na2H9Hmos0OftQfxu9A/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsvrVpZMS87QUQwRoS4svtRvD5JfZWBz7ltVwQJ2cXfia3khYrRn7qTpA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsQ2obnicxqsJFrFkTib8QMdiah5yjDLRAH4A6Dvv4Rc40A2OePp9xAxpCQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsCoxqcduibyKDpCnAnmibnVNaqJV0YibhpYYp3gE65N1W771XqzzibZQelA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2Ecibs1G1ickrTiaqeCZU52j6ibcj17vYGUiccE8oALmTQXbiaeOKcc5ZibAwj966Q/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibscvQzdW5SqAhOjV8y1Q3XewCCkG8YbzlBFibQMMAeOJQLFgtiaqcJYnwA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsLu2WteEnEZdVUbm2XLh5rDfKcWeLYYbUkDl75lo24jib4CbWmGHCZug/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsoaByag5Eh52qcZNialGyVKHvcicQ9HFxrWTsvJ7Zeh02evJN2ufTZ5Rw/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsKyTxsxAClzrIgScDUhDEhO1zTcncial0ZJwu3ZJQRwKRug9F1VlU9icQ/0?wx_fmt=jpeg)

二叉查找树的结构：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsvX4fQHNcU5drUrPZPFsuzicnicKycoHQd4Hqric5UzjeK7bsSRVbykmnw/0?wx_fmt=jpeg)

第 1 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsMKibN9giaNVMbFIlnvTkruWuatuQdvoN07INpbQMFfibtlamFibYTYZjTw/0?wx_fmt=jpeg)

第 2 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsonW75DsA6sbibqEEDib8e127Bmlx1cjNiacNAtJRtHdgssedibHxWVz0Bg/0?wx_fmt=jpeg)

第 3 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsnjKOKCu20S5b2apqe3RHqiaL5cRTPxicF2NQ4j4ic8dbvBwTGgdCLHbxg/0?wx_fmt=jpeg)

第 4 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsqUOlpMg643uxxrb9ygP4Shq20MEicRsv5GqzxqImolibJOVf5Qn9ySgQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsRbGPSjia4RQWOVQ2DZVhYibibJasdg3v3QMNS0p4IJtDnAcOnVP4xYp8Q/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2Ecibsr6LX79azuhDhNsNibBibVanpqDbccbibgkFziaNHsTPQNsLPq8GSxgNQtQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsmRy2uqE5dPtRSbhIJ4ciaZTMGD3dzDYTAQETXGa3zxj0AdLfFphhCtA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsibqHeTIn9hibc3GJGiarSS9xH0SpPhaclQvKBYy5nbmTg1cYnJM3AFfpg/0?wx_fmt=jpeg)

下面来具体介绍一下 B - 树（Balance Tree），一个 m 阶的 B 树具有如下几个特征：

1. 根结点至少有两个子女。

2. 每个中间节点都包含 k-1 个元素和 k 个孩子，其中 m/2 <= k <= m

3. 每一个叶子节点都包含 k-1 个元素，其中 m/2 <= k <= m

4. 所有的叶子结点都位于同一层。

5. 每个节点中的元素从小到大排列，节点当中 k-1 个元素正好是 k 个孩子包含的元素的值域分划。

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsjkSxcKGRzGmJ3iaxkBAnc0vqOfTn2nMJWTQLICNFh8f4S8TeVpzeX6w/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2EcibsBx8AoeUa9IVbk2JbdsjMZ5p0tdicHkO6fN6dCIwdIojkxicK4GdAv7XQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGoBqEgxvibyZ3S2O8GG2Ecibs5LFXxLRhEVH55mqXMhGf9C2icZ4iaFcBhUhABThvG0hiaoD1z4icgQJbbA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRSQb6eDxZctbAxvNt5gYKPlFEiaNaPcqor2hJ6peyuxGQDmQ8Gaougibw/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRictJGn6axEj3BMbc5RwBiaAPPC9mWxYl6yhQ8icB1YAnux37NmYiatKQXQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRwHXAS5B5icGP98ChYyCQ3jiaw7ickeibRBibZTtu5HwWM30R15VAbCh4tOQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRxZ6vZjclNWA40cibmZAic9ZZYeZT4aOibCZVTAc4CaauXJN76UvDb7m3Q/0?wx_fmt=jpeg)

第 1 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRCCdQPjxVB531QYltibYibYIo6ialib6bg8sXJOBOeicDvEUvniastwicibaeibg/0?wx_fmt=jpeg)

在内存中定位（和 9 比较）：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRIiasUvxOs9ibvlu4PP4gtPZmAbhEVich1tpja1PDWeHyx5491J9bLE12A/0?wx_fmt=jpeg)

第 2 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqR4ccGREXzfjztA98p0b4dICrLAXrsibqYaQU5MRezYuAchHlpdl9MIzw/0?wx_fmt=jpeg)

在内存中定位（和 2，6 比较）：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRKf8XQytR3X9B321Nkva8Fovzn9Fmn95HZP4oK1Il7aFFtCdyhHffUw/0?wx_fmt=jpeg)

第 3 次磁盘 IO：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRMqrICiaHEH2ucwtbSgh4AT3usOO98Axv3mwHGWOea2GkJQ77Svxfs5g/0?wx_fmt=jpeg)

在内存中定位（和 3，5 比较）：

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRu8LjAqtagyeicY27yaUG0SmmLQLCOP3VQrQNIeMCaxfibY6PpicuF1tyg/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqROjXMmxDcDp47DBcuORbpMnxg50rsBQ96CN1V8kxL2Z7KjsgJCl5diaw/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRY7fntn7UFgicRUrjHaD0bdmWVYwVFHbcxYNVcibSeWIXbhiaAoVzccEiaQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRzlhRceia6QePPtGlxXchpFllA5Pj2uxicwJGQNLiaJQcicDNYQ3ptnqn2g/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRXpicfJ3TeTpKia3Q3O8g2GveeiadPpGQLU4LAt4hNCKra1fFSlHTvCWNw/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRK4Kd1rCcGicTltzlzVFUWiblatibLy2rYfiaYrCKwv8IXb8egabgXJgWJg/0?wx_fmt=jpeg)

自顶向下查找 4 的节点位置，发现 4 应当插入到节点元素 3，5 之间。

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRYk5euDrbMgVubTR4gvIL3U4LdicK3Fu1f7ATq9tGChL9YLXibJeuCTCA/0?wx_fmt=jpeg)

节点 3，5 已经是两元素节点，无法再增加。父亲节点 2， 6 也是两元素节点，也无法再增加。根节点 9 是单元素节点，可以升级为两元素节点。于是**拆分**节点 3，5 与节点 2，6，让根节点 9 升级为两元素节点 4，9。节点 6 独立为根节点的第二个孩子。

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRSBqOKQc3NYe8HA7mX4QjSjUpfkWLqGBfWm8wHmic7qajFaickGSTX8NA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqR9v2h25hzn192XuqicoUVCWIBEt6gKRocujXzDJiamrgib1EV1ibSpxNQUA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRbtPeqBtFvXneXlicy7aPRWiaQ59goTjyCAmnX1tTQ0KlY24NbMxtfF0w/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRmC7NLG3HUZoqpvP30UDSMTj0WNwoUYhakYNibAQaUlKiclicvyMNt3bGA/0?wx_fmt=jpeg)

自顶向下查找元素 11 的节点位置。

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRfnGwPGrX4NhnkJfBuKqNdXAyHWJiaBd5b0ruibuhHJvUnmCYpt1eJxdg/0?wx_fmt=jpeg)

删除 11 后，节点 12 只有一个孩子，不符合 B 树规范。因此找出 12,13,15 三个节点的中位数 13，取代节点 12，而节点 12 自身下移成为第一个孩子。（这个过程称为**左旋**）

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRta9bOwANA1gjzduWKKAhl5N9IkFgZPNYNNzzdByY7LYiautLXVNnJ4w/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRbDOA2SYhksUO3BlibgZciauxcTZFfXobCnFwPegUjLHYqwq4CW7gTYGg/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRJL3EcNOic0fHafn4ltyInugPY8jtiaUkfQWMYOia3zcsqEmibZ7xszsvvw/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRdkMYKpR4OMWfwLVEjyVTFvN247FyLu2xh6tiaAaZHLq3CdtbpHJNCicQ/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqRDNv7EqMgsEBvBibODkjW2iaO8ib2pOvBlarsmXK3bVPTJcqCV6qS9yTqA/0?wx_fmt=jpeg)

![](http://mmbiz.qpic.cn/mmbiz_jpg/NtO5sialJZGrbI83f8meYn1UlzibHGBcqR9e717QtA8PSsFvkWnwjs9HuI28mbpmvaLFFfSiakAlfnotvdZ0gibApA/0?wx_fmt=jpeg)

—————END—————
